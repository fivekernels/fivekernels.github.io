<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Hugo 主题配置——Papermod | 胡写乱画</title>
<meta name="keywords" content="Hugo">
<meta name="description" content="Hugo 主题配置——Papermod 官方链接： github: https://github.com/adityatelange/hugo-PaperMod github wiki:https://github.com/adityatelange/hugo-PaperMod/wiki demo code: https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/ demo: https://adityatelange.github.io/hugo-PaperMod// Papermod 主题默认使用 .yaml 格式作为配置文件，因此新建网站时可以使用 -f 设置 yml 格式： 1 hugo new site &lt;name of">
<meta name="author" content="hey">
<link rel="canonical" href="https://fivekernels.github.io/posts/hugo-configuration-theme-papermod/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.193f5e1cb1ec7f5edeaea1140916a7023d6d6c087917077bf463fe5ee3727903.css" integrity="sha256-GT9eHLHsf17erqEUCRanAj1tbAh5Fwd79GP&#43;XuNyeQM=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://fivekernels.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://fivekernels.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://fivekernels.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://fivekernels.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://fivekernels.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Hugo 主题配置——Papermod" />
<meta property="og:description" content="Hugo 主题配置——Papermod 官方链接： github: https://github.com/adityatelange/hugo-PaperMod github wiki:https://github.com/adityatelange/hugo-PaperMod/wiki demo code: https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/ demo: https://adityatelange.github.io/hugo-PaperMod// Papermod 主题默认使用 .yaml 格式作为配置文件，因此新建网站时可以使用 -f 设置 yml 格式： 1 hugo new site &lt;name of" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://fivekernels.github.io/posts/hugo-configuration-theme-papermod/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-25T19:12:11+08:00" />
<meta property="article:modified_time" content="2022-03-18T19:45:00+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hugo 主题配置——Papermod"/>
<meta name="twitter:description" content="Hugo 主题配置——Papermod 官方链接： github: https://github.com/adityatelange/hugo-PaperMod github wiki:https://github.com/adityatelange/hugo-PaperMod/wiki demo code: https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/ demo: https://adityatelange.github.io/hugo-PaperMod// Papermod 主题默认使用 .yaml 格式作为配置文件，因此新建网站时可以使用 -f 设置 yml 格式： 1 hugo new site &lt;name of"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://fivekernels.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Hugo 主题配置——Papermod",
      "item": "https://fivekernels.github.io/posts/hugo-configuration-theme-papermod/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Hugo 主题配置——Papermod",
  "name": "Hugo 主题配置——Papermod",
  "description": "Hugo 主题配置——Papermod 官方链接： github: https://github.com/adityatelange/hugo-PaperMod github wiki:https://github.com/adityatelange/hugo-PaperMod/wiki demo code: https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/ demo: https://adityatelange.github.io/hugo-PaperMod// Papermod 主题默认使用 .yaml 格式作为配置文件，因此新建网站时可以使用 -f 设置 yml 格式： 1 hugo new site \u0026lt;name of",
  "keywords": [
    "Hugo"
  ],
  "articleBody": "Hugo 主题配置——Papermod 官方链接：\ngithub: https://github.com/adityatelange/hugo-PaperMod github wiki:https://github.com/adityatelange/hugo-PaperMod/wiki demo code: https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/ demo: https://adityatelange.github.io/hugo-PaperMod// Papermod 主题默认使用 .yaml 格式作为配置文件，因此新建网站时可以使用 -f 设置 yml 格式：\n1 hugo new site -f yml 将主题添加到网站文件夹中：\n1 2 git submodule add git@github.com:adityatelange/hugo-PaperMod.git themes/PaperMod --depth=1 git submodule update --init --recursive # needed when you reclone your repo (submodules may not get cloned automatically) 导航菜单与页面配置 …待更新…\n首页样式配置 …待更新…\n文章顶端信息 参考：Sulv’s Blog：Hugo博客修改post_meta头部信息\n添加文章修改日期 将theme目录下的文件：layouts/partials/post_meta.html，复制到layouts对应目录下，并添加以下内容：\n1 2 3 4 {{- if (.Param \"ShowLastMod\") -}} {{- $scratch.Add \"meta\" (slice (printf \"Updated:\u0026nbsp;%s\" (.Lastmod.Format (.Site.Params.dateFormat | default \"January 2, 2006\")))) }} {{- end }} 在Hugo的配置文件config.yml中的params下添加以下内容：\n1 2 3 params: ... ShowLastMod: true # 显示文章更新时间 配合post_meta.html 文章开头添加相应字段即可：\n1 lastmod: 2022-03-18T13:59:59+08:00 此外，可以在archetypes/default.md中添加lastmod字段，之后创建文章时会自动生成该部分内容。\n1 lastmod: {{ .Date }} 其他样式也可以酌情进行修改\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 {{- $scratch := newScratch }} {{- if not .Date.IsZero -}} {{- $scratch.Add \"meta\" (slice (printf \"创建:\u0026nbsp;\u003cspan title='%s'\u003e%s\u003c/span\u003e\" (.Date) (.Date.Format (default \"January 2, 2006\" .Site.Params.DateFormat)))) }} {{- end }} {{- if (.Param \"ShowLastMod\") -}} {{- $scratch.Add \"meta\" (slice (printf \"更新:\u0026nbsp;%s\" (.Lastmod.Format (.Site.Params.dateFormat | default \"2006-01-02\")))) }} {{- end }} {{- if (.Param \"ShowWordCounts\") -}} {{- $scratch.Add \"meta\" (slice (default (printf \"字数:\u0026nbsp;%d字\" .WordCount))) }} {{- end }} {{- if (.Param \"ShowReadingTime\") -}} {{- $scratch.Add \"meta\" (slice (default (printf \"时长: %d分钟\" .ReadingTime))) }} {{- end }} {{- with (partial \"author.html\" .) }} {{- $scratch.Add \"meta\" (slice .) }} {{- end }} {{- with ($scratch.Get \"meta\") }} {{- delimit . \"\u0026nbsp;|\u0026nbsp;\" -}} {{- end -}} 作者的中文显示要找到layouts/partials/author.html，在如下位置加入中文\n1 作者:\u0026nbsp;{{- $author := (.Params.author | default .Site.Params.author) }} 文章基础配置 …待更新…\n文章目录 TOC 侧边放置 参考：\nToc on the side | Github Pull Requests | nielsbrakel\nSulv’s Blog: Hugo博客目录放在侧边 | PaperMod主题\ntoc代码 在Hugo根目录下的layouts文件夹下新建partials文件夹，并建立文件toc_side.html（/layouts/partials/toc_side.html），layouts文件夹中的内容优先级高于theme中主题的layouts文件夹。输入以下内容：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 {{- $headers := findRE \"\u003ch[1-6].*?\u003e(.|\\n])+?\u003c/h[1-6]\u003e\" .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u003caside id=\"toc-container\" class=\"toc-container wide\"\u003e \u003cdiv class=\"toc\"\u003e \u003cdetails {{if (.Param \"TocOpen\") }} open{{ end }}\u003e \u003csummary accesskey=\"c\" title=\"(Alt + C)\"\u003e \u003cspan class=\"details\"\u003e{{- i18n \"toc\" | default \"Table of Contents\" }}\u003c/span\u003e \u003c/summary\u003e \u003cdiv class=\"inner\"\u003e {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \"[1-6]\" . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \"[1-6]\" (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \"bareul\" slice -}} \u003cul\u003e {{- range seq (sub $firstHeaderLevel $largest) -}} \u003cul\u003e {{- $.Scratch.Add \"bareul\" (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \"[1-6]\" . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\"xyz\" */}} {{- $id := index (findRE \"(id=\\\"(.*?)\\\")\" $header 9) 0 }} {{- /* strip id=\"\" to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \"id=\\\"\" \"\") \"\\\"\" \"\" }} {{- $header := replaceRE \"\u003ch[1-6].*?\u003e((.|\\n])+?)\u003c/h[1-6]\u003e\" \"$1\" $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \"[1-6]\" (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u003cul\u003e {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \"bareul\" . -}} {{- end -}} {{- end -}} {{- else -}} \u003c/li\u003e {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \"bareul\") . -}} \u003c/ul\u003e {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \"bareul\" -}} {{- $.Scratch.Delete \"bareul\" -}} {{- $.Scratch.Set \"bareul\" slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \"bareul\" (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u003c/ul\u003e \u003c/li\u003e {{- end -}} {{- end -}} {{- end -}} {{- end }} \u003cli\u003e \u003ca href=\"#{{- $cleanedID -}}\" aria-label=\"{{- $header | plainify -}}\"\u003e{{- $header | safeHTML -}}\u003c/a\u003e {{- else }} \u003cli\u003e \u003ca href=\"#{{- $cleanedID -}}\" aria-label=\"{{- $header | plainify -}}\"\u003e{{- $header | safeHTML -}}\u003c/a\u003e {{- end -}} {{- end -}} {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \"[1-6]\" (index $headers (sub (len $headers) 1)) 1) 0)) }} \u003c/li\u003e {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \"bareul\") (add . $firstHeaderLevel) }} \u003c/ul\u003e {{- else }} \u003c/ul\u003e \u003c/li\u003e {{- end -}} {{- end }} \u003c/ul\u003e \u003c/div\u003e \u003c/details\u003e \u003c/div\u003e \u003c/aside\u003e \u003cscript\u003e let activeElement; let elements; window.addEventListener('DOMContentLoaded', function (event) { checkTocPosition(); elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute('id')).toLowerCase(); document.querySelector(`.inner ul li a[href=\"#${id}\"]`).classList.add('active'); }, false); window.addEventListener('resize', function(event) { checkTocPosition(); }, false); window.addEventListener('scroll', () =\u003e { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u003e { if ((getOffsetTop(element) - window.pageYOffset) \u003e 0 \u0026\u0026 (getOffsetTop(element) - window.pageYOffset) \u003c window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u003e { const id = encodeURI(element.getAttribute('id')).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\"#${id}\"]`).classList.add('active'); } else { document.querySelector(`.inner ul li a[href=\"#${id}\"]`).classList.remove('active'); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u003e 0) { document.getElementById(\"toc-container\").classList.add(\"wide\"); } else { document.getElementById(\"toc-container\").classList.remove(\"wide\"); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u003c/script\u003e {{- end }} 调用代码 找到主题目录下的layouts/_default/single.html文件，将其复制到根目录下的layouts/_default/single.html中，找到其调用代码\n1 2 3 {{- if (.Param \"ShowToc\") }} {{- partial \"toc.html\" . }} {{- end }} 修改为\n1 2 3 4 {{- if (.Param \"ShowToc\") }} {{- partial \"toc_side.html\" . }} {{- end }} 修改css 在Hugo根目录新建assets文件夹，此时该目录比theme主题目录中的assets文件夹具有更高的优先级。在根目录下的assets中创建css/extended/blank.css，加入以下代码：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 :root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; /*目录显示高度*/ max-height: 83vh; overflow-y: auto; } .toc .inner::-webkit-scrollbar-thumb { /*滚动条*/ background: var(--border); border: 7px solid var(--theme); border-radius: var(--radius); } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { /* list-style: none; */ /* 不显示目录前的小圆圈 */ font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 重新生成站点即可预览效果。\n代码样式设置 Hugo 默认支持 Chroma，但可选的高亮主题不多，点击查看主题列表。\n在配置文件中禁用 highlight.js，然后使用自带的高亮主题；如果不设置 disableHLJS: true，highlight.js 会覆盖 Chroma 主题。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 params: assets: disableHLJS: true # ... markup: highlight: codeFences: true guessSyntax: true lineNos: true anchorLineNos: false # 行号锚点（特别丑！） # lineNumbersInTable: true noClasses: false tabWidth: 4 style: dracula 但是如果对于代码块中启用了高亮某些行时，行号大于10的时候将会显示不正常，此时只能配置 noClasses: false 并手动使用hugo生成css文件：\n1 hugo gen chromastyles --style dracula \u003e assets/css/extended/dracula.css 代码块中的背景色默认是不随亮暗主题改变的，可以在 assets/css/extended/blank.css 中添加以下内容调整不同的背景色：\n1 2 3 4 5 6 :root { --hljs-bg: #282C34; } .dark { --hljs-bg: #1c1c1c; } Reference https://github.com/adityatelange/hugo-PaperMod/issues/923\nhttps://github.com/adityatelange/hugo-PaperMod/wiki/FAQs#using-hugos-syntax-highlighter-chroma\nhttps://dvel.me/posts/hugo-papermod-config/#%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE\n",
  "wordCount" : "2677",
  "inLanguage": "zh-cn",
  "datePublished": "2022-01-25T19:12:11+08:00",
  "dateModified": "2022-03-18T19:45:00+08:00",
  "author":{
    "@type": "Person",
    "name": "hey"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fivekernels.github.io/posts/hugo-configuration-theme-papermod/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "胡写乱画",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fivekernels.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://fivekernels.github.io/" accesskey="h" title="胡写乱画 (Alt + H)">胡写乱画</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://fivekernels.github.io/" title="🏠首页">
                    <span>🏠首页</span>
                </a>
            </li>
            <li>
                <a href="https://fivekernels.github.io/posts/" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://fivekernels.github.io/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://fivekernels.github.io/categories/" title="🧩分类">
                    <span>🧩分类</span>
                </a>
            </li>
            <li>
                <a href="https://fivekernels.github.io/tags/" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://fivekernels.github.io/about/" title="🥣关于">
                    <span>🥣关于</span>
                </a>
            </li>
            <li>
                <a href="https://fivekernels.github.io/search/" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://fivekernels.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://fivekernels.github.io/posts/">📚文章</a></div>
    <h1 class="post-title">
      Hugo 主题配置——Papermod<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>
    </h1>
    <div class="post-meta">



<span title='2022-01-25 19:12:11 +0800 CST'>2022/01/25</span>&nbsp;·&nbsp;Updated:&nbsp;2022/03/18&nbsp;·&nbsp;6 min&nbsp;·&nbsp;2677 words&nbsp;·&nbsp;hey

</div>
  </header> 
  <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#hugo-%e4%b8%bb%e9%a2%98%e9%85%8d%e7%bd%aepapermod" aria-label="Hugo 主题配置——Papermod">Hugo 主题配置——Papermod</a></li>
                    <li>
                        <a href="#%e5%af%bc%e8%88%aa%e8%8f%9c%e5%8d%95%e4%b8%8e%e9%a1%b5%e9%9d%a2%e9%85%8d%e7%bd%ae" aria-label="导航菜单与页面配置">导航菜单与页面配置</a></li>
                    <li>
                        <a href="#%e9%a6%96%e9%a1%b5%e6%a0%b7%e5%bc%8f%e9%85%8d%e7%bd%ae" aria-label="首页样式配置">首页样式配置</a></li>
                    <li>
                        <a href="#%e6%96%87%e7%ab%a0%e9%a1%b6%e7%ab%af%e4%bf%a1%e6%81%af" aria-label="文章顶端信息">文章顶端信息</a><ul>
                            
                    <li>
                        <a href="#%e6%b7%bb%e5%8a%a0%e6%96%87%e7%ab%a0%e4%bf%ae%e6%94%b9%e6%97%a5%e6%9c%9f" aria-label="添加文章修改日期">添加文章修改日期</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%96%87%e7%ab%a0%e5%9f%ba%e7%a1%80%e9%85%8d%e7%bd%ae" aria-label="文章基础配置">文章基础配置</a></li>
                    <li>
                        <a href="#%e6%96%87%e7%ab%a0%e7%9b%ae%e5%bd%95-toc-%e4%be%a7%e8%be%b9%e6%94%be%e7%bd%ae" aria-label="文章目录 TOC 侧边放置">文章目录 TOC 侧边放置</a><ul>
                            
                    <li>
                        <a href="#toc%e4%bb%a3%e7%a0%81" aria-label="toc代码">toc代码</a></li>
                    <li>
                        <a href="#%e8%b0%83%e7%94%a8%e4%bb%a3%e7%a0%81" aria-label="调用代码">调用代码</a></li>
                    <li>
                        <a href="#%e4%bf%ae%e6%94%b9css" aria-label="修改css">修改css</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e6%a0%b7%e5%bc%8f%e8%ae%be%e7%bd%ae" aria-label="代码样式设置">代码样式设置</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="hugo-主题配置papermod">Hugo 主题配置——Papermod<a hidden class="anchor" aria-hidden="true" href="#hugo-主题配置papermod">#</a></h2>
<p>官方链接：</p>
<ul>
<li>github: <a href="https://github.com/adityatelange/hugo-PaperMod">https://github.com/adityatelange/hugo-PaperMod</a></li>
<li>github wiki:<a href="https://github.com/adityatelange/hugo-PaperMod/wiki">https://github.com/adityatelange/hugo-PaperMod/wiki</a></li>
<li>demo code: <a href="https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/">https://github.com/adityatelange/hugo-PaperMod/tree/exampleSite/</a></li>
<li>demo: <a href="https://adityatelange.github.io/hugo-PaperMod//">https://adityatelange.github.io/hugo-PaperMod//</a></li>
</ul>
<p>  Papermod 主题默认使用 .yaml 格式作为配置文件，因此新建网站时可以使用 -f 设置 yml 格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo new site &lt;name of site&gt; -f yml
</span></span></code></pre></td></tr></table>
</div>
</div><p>  将主题添加到网站文件夹中：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git submodule add git@github.com:adityatelange/hugo-PaperMod.git themes/PaperMod --depth<span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">git submodule update --init --recursive <span class="c1"># needed when you reclone your repo (submodules may not get cloned automatically)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="导航菜单与页面配置">导航菜单与页面配置<a hidden class="anchor" aria-hidden="true" href="#导航菜单与页面配置">#</a></h2>
<p>  &hellip;待更新&hellip;</p>
<h2 id="首页样式配置">首页样式配置<a hidden class="anchor" aria-hidden="true" href="#首页样式配置">#</a></h2>
<p>  &hellip;待更新&hellip;</p>
<h2 id="文章顶端信息">文章顶端信息<a hidden class="anchor" aria-hidden="true" href="#文章顶端信息">#</a></h2>
<p>参考：<a href="https://www.sulvblog.cn/posts/blog/hugo_postmeta/">Sulv&rsquo;s Blog：Hugo博客修改post_meta头部信息</a></p>
<h3 id="添加文章修改日期">添加文章修改日期<a hidden class="anchor" aria-hidden="true" href="#添加文章修改日期">#</a></h3>
<p>  将theme目录下的文件：layouts/partials/post_meta.html，复制到layouts对应目录下，并添加以下内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- 更新时间 --&gt;</span>
</span></span><span class="line"><span class="cl">{{- if (.Param &#34;ShowLastMod&#34;) -}}
</span></span><span class="line"><span class="cl">{{- $scratch.Add &#34;meta&#34; (slice (printf &#34;Updated:<span class="ni">&amp;nbsp;</span>%s&#34; (.Lastmod.Format (.Site.Params.dateFormat | default &#34;January 2, 2006&#34;)))) }}
</span></span><span class="line"><span class="cl">{{- end }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>  在Hugo的配置文件config.yml中的params下添加以下内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="hl"><span class="lnt">3
</span></span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">params</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="l">...</span><span class="w">
</span></span></span><span class="line hl"><span class="cl"><span class="w">    </span><span class="nt">ShowLastMod</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># 显示文章更新时间 配合post_meta.html</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>文章开头添加相应字段即可：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">lastmod</span><span class="p">:</span><span class="w"> </span><span class="ld">2022-03-18T13:59:59</span><span class="m">+08</span><span class="p">:</span><span class="m">00</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>此外，可以在archetypes/default.md中添加lastmod字段，之后创建文章时会自动生成该部分内容。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">lastmod</span><span class="p">:</span><span class="w"> </span>{{<span class="w"> </span><span class="l">.Date }}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>其他样式也可以酌情进行修改</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{- $scratch := newScratch }}
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 创建时间 --&gt;</span>
</span></span><span class="line"><span class="cl">{{- if not .Date.IsZero -}}
</span></span><span class="line"><span class="cl">{{- $scratch.Add &#34;meta&#34; (slice (printf &#34;创建:<span class="ni">&amp;nbsp;</span><span class="p">&lt;</span><span class="nt">span</span> <span class="na">title</span><span class="o">=</span><span class="s">&#39;%s&#39;</span><span class="p">&gt;</span>%s<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>&#34; (.Date) (.Date.Format (default &#34;January 2, 2006&#34; .Site.Params.DateFormat)))) }}
</span></span><span class="line"><span class="cl">{{- end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 更新时间 --&gt;</span>
</span></span><span class="line"><span class="cl">{{- if (.Param &#34;ShowLastMod&#34;) -}}
</span></span><span class="line"><span class="cl">{{- $scratch.Add &#34;meta&#34; (slice (printf &#34;更新:<span class="ni">&amp;nbsp;</span>%s&#34; (.Lastmod.Format (.Site.Params.dateFormat | default &#34;2006-01-02&#34;)))) }}
</span></span><span class="line"><span class="cl">{{- end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 统计字数 --&gt;</span>
</span></span><span class="line"><span class="cl">{{- if (.Param &#34;ShowWordCounts&#34;) -}}
</span></span><span class="line"><span class="cl">{{- $scratch.Add &#34;meta&#34; (slice (default (printf &#34;字数:<span class="ni">&amp;nbsp;</span>%d字&#34; .WordCount))) }}
</span></span><span class="line"><span class="cl">{{- end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 大概需要花费的阅读时间 --&gt;</span>
</span></span><span class="line"><span class="cl">{{- if (.Param &#34;ShowReadingTime&#34;) -}}
</span></span><span class="line"><span class="cl">{{- $scratch.Add &#34;meta&#34; (slice (default (printf &#34;时长: %d分钟&#34; .ReadingTime))) }}
</span></span><span class="line"><span class="cl">{{- end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 作者 --&gt;</span>
</span></span><span class="line"><span class="cl">{{- with (partial &#34;author.html&#34; .) }}
</span></span><span class="line"><span class="cl">{{- $scratch.Add &#34;meta&#34; (slice .) }}
</span></span><span class="line"><span class="cl">{{- end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 分隔方式 --&gt;</span>
</span></span><span class="line"><span class="cl">{{- with ($scratch.Get &#34;meta&#34;) }}
</span></span><span class="line"><span class="cl">{{- delimit . &#34;<span class="ni">&amp;nbsp;</span>|<span class="ni">&amp;nbsp;</span>&#34; -}}
</span></span><span class="line"><span class="cl">{{- end -}}
</span></span></code></pre></td></tr></table>
</div>
</div><p>作者的中文显示要找到layouts/partials/author.html，在如下位置加入中文</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">作者:<span class="ni">&amp;nbsp;</span>{{- $author := (.Params.author | default .Site.Params.author) }}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="文章基础配置">文章基础配置<a hidden class="anchor" aria-hidden="true" href="#文章基础配置">#</a></h2>
<p>  &hellip;待更新&hellip;</p>
<h2 id="文章目录-toc-侧边放置">文章目录 TOC 侧边放置<a hidden class="anchor" aria-hidden="true" href="#文章目录-toc-侧边放置">#</a></h2>
<p>参考：<br>
<a href="https://github.com/adityatelange/hugo-PaperMod/pull/675">Toc on the side | Github Pull Requests | nielsbrakel</a><br>
<a href="https://www.sulvblog.cn/posts/blog/hugo_toc_side/">Sulv&rsquo;s Blog: Hugo博客目录放在侧边 | PaperMod主题</a></p>
<h3 id="toc代码">toc代码<a hidden class="anchor" aria-hidden="true" href="#toc代码">#</a></h3>
<p>  在Hugo根目录下的layouts文件夹下新建partials文件夹，并建立文件toc_side.html（&lt;siteroot&gt;/layouts/partials/toc_side.html），layouts文件夹中的内容优先级高于theme中主题的layouts文件夹。输入以下内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{- $headers := findRE &#34;<span class="p">&lt;</span><span class="nt">h</span><span class="err">[</span><span class="na">1-6</span><span class="err">].*?</span><span class="p">&gt;</span>(.|\n])+?<span class="err">&lt;</span>/h[1-6]&gt;&#34; .Content -}}
</span></span><span class="line"><span class="cl">{{- $has_headers := ge (len $headers) 1 -}}
</span></span><span class="line"><span class="cl">{{- if $has_headers -}}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">aside</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;toc-container&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;toc-container wide&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;toc&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">details</span> <span class="err">{{</span><span class="na">if</span> <span class="err">(.</span><span class="na">Param</span> <span class="err">&#34;</span><span class="na">TocOpen</span><span class="err">&#34;)</span> <span class="err">}}</span> <span class="na">open</span><span class="err">{{</span> <span class="na">end</span> <span class="err">}}</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">summary</span> <span class="na">accesskey</span><span class="o">=</span><span class="s">&#34;c&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;(Alt + C)&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;details&#34;</span><span class="p">&gt;</span>{{- i18n &#34;toc&#34; | default &#34;Table of Contents&#34; }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">summary</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;inner&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                {{- $largest := 6 -}}
</span></span><span class="line"><span class="cl">                {{- range $headers -}}
</span></span><span class="line"><span class="cl">                {{- $headerLevel := index (findRE &#34;[1-6]&#34; . 1) 0 -}}
</span></span><span class="line"><span class="cl">                {{- $headerLevel := len (seq $headerLevel) -}}
</span></span><span class="line"><span class="cl">                {{- if lt $headerLevel $largest -}}
</span></span><span class="line"><span class="cl">                {{- $largest = $headerLevel -}}
</span></span><span class="line"><span class="cl">                {{- end -}}
</span></span><span class="line"><span class="cl">                {{- end -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                {{- $firstHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers 0) 1) 0)) -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                {{- $.Scratch.Set &#34;bareul&#34; slice -}}
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    {{- range seq (sub $firstHeaderLevel $largest) -}}
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        {{- $.Scratch.Add &#34;bareul&#34; (sub (add $largest .) 1) -}}
</span></span><span class="line"><span class="cl">                        {{- end -}}
</span></span><span class="line"><span class="cl">                        {{- range $i, $header := $headers -}}
</span></span><span class="line"><span class="cl">                        {{- $headerLevel := index (findRE &#34;[1-6]&#34; . 1) 0 -}}
</span></span><span class="line"><span class="cl">                        {{- $headerLevel := len (seq $headerLevel) -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        {{/* get id=&#34;xyz&#34; */}}
</span></span><span class="line"><span class="cl">                        {{- $id := index (findRE &#34;(id=\&#34;(.*?)\&#34;)&#34; $header 9) 0 }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        {{- /* strip id=&#34;&#34; to leave xyz, no way to get regex capturing groups in hugo */ -}}
</span></span><span class="line"><span class="cl">                        {{- $cleanedID := replace (replace $id &#34;id=\&#34;&#34; &#34;&#34;) &#34;\&#34;&#34; &#34;&#34; }}
</span></span><span class="line"><span class="cl">                        {{- $header := replaceRE &#34;<span class="p">&lt;</span><span class="nt">h</span><span class="err">[</span><span class="na">1-6</span><span class="err">].*?</span><span class="p">&gt;</span>((.|\n])+?)<span class="err">&lt;</span>/h[1-6]&gt;&#34; &#34;$1&#34; $header -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        {{- if ne $i 0 -}}
</span></span><span class="line"><span class="cl">                        {{- $prevHeaderLevel := index (findRE &#34;[1-6]&#34; (index $headers (sub $i 1)) 1) 0 -}}
</span></span><span class="line"><span class="cl">                        {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}}
</span></span><span class="line"><span class="cl">                        {{- if gt $headerLevel $prevHeaderLevel -}}
</span></span><span class="line"><span class="cl">                        {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}}
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                            {{/* the first should not be recorded */}}
</span></span><span class="line"><span class="cl">                            {{- if ne $prevHeaderLevel . -}}
</span></span><span class="line"><span class="cl">                            {{- $.Scratch.Add &#34;bareul&#34; . -}}
</span></span><span class="line"><span class="cl">                            {{- end -}}
</span></span><span class="line"><span class="cl">                            {{- end -}}
</span></span><span class="line"><span class="cl">                            {{- else -}}
</span></span><span class="line"><span class="cl">                            <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                            {{- if lt $headerLevel $prevHeaderLevel -}}
</span></span><span class="line"><span class="cl">                            {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}}
</span></span><span class="line"><span class="cl">                            {{- if in ($.Scratch.Get &#34;bareul&#34;) . -}}
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        {{/* manually do pop item */}}
</span></span><span class="line"><span class="cl">                        {{- $tmp := $.Scratch.Get &#34;bareul&#34; -}}
</span></span><span class="line"><span class="cl">                        {{- $.Scratch.Delete &#34;bareul&#34; -}}
</span></span><span class="line"><span class="cl">                        {{- $.Scratch.Set &#34;bareul&#34; slice}}
</span></span><span class="line"><span class="cl">                        {{- range seq (sub (len $tmp) 1) -}}
</span></span><span class="line"><span class="cl">                        {{- $.Scratch.Add &#34;bareul&#34; (index $tmp (sub . 1)) -}}
</span></span><span class="line"><span class="cl">                        {{- end -}}
</span></span><span class="line"><span class="cl">                        {{- else -}}
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    {{- end -}}
</span></span><span class="line"><span class="cl">                    {{- end -}}
</span></span><span class="line"><span class="cl">                    {{- end -}}
</span></span><span class="line"><span class="cl">                    {{- end }}
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#{{- $cleanedID -}}&#34;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&#34;{{- $header | plainify -}}&#34;</span><span class="p">&gt;</span>{{- $header | safeHTML -}}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        {{- else }}
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#{{- $cleanedID -}}&#34;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&#34;{{- $header | plainify -}}&#34;</span><span class="p">&gt;</span>{{- $header | safeHTML -}}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        {{- end -}}
</span></span><span class="line"><span class="cl">                        {{- end -}}
</span></span><span class="line"><span class="cl">                        <span class="c">&lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers 0) 1) 0)) -}} --&gt;</span>
</span></span><span class="line"><span class="cl">                        {{- $firstHeaderLevel := $largest }}
</span></span><span class="line"><span class="cl">                        {{- $lastHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers (sub (len $headers) 1)) 1) 0)) }}
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}}
</span></span><span class="line"><span class="cl">                    {{- if in ($.Scratch.Get &#34;bareul&#34;) (add . $firstHeaderLevel) }}
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                {{- else }}
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                {{- end -}}
</span></span><span class="line"><span class="cl">                {{- end }}
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">details</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">aside</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">activeElement</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">elements</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">checkTocPosition</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">         <span class="c1">// Make the first header active
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>         <span class="nx">activeElement</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">         <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nb">encodeURI</span><span class="p">(</span><span class="nx">activeElement</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)).</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">         <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="sb">`.inner ul li a[href=&#34;#</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">&#34;]`</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">     <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">checkTocPosition</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Check if there is an object in the top half of the screen or keep the last item active
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">activeElement</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">elements</span><span class="p">).</span><span class="nx">find</span><span class="p">((</span><span class="nx">element</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">((</span><span class="nx">getOffsetTop</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> 
</span></span><span class="line"><span class="cl">                <span class="p">(</span><span class="nx">getOffsetTop</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nx">element</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span> <span class="o">||</span> <span class="nx">activeElement</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">elements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">element</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">             <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nb">encodeURI</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)).</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">             <span class="k">if</span> <span class="p">(</span><span class="nx">element</span> <span class="o">===</span> <span class="nx">activeElement</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                 <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="sb">`.inner ul li a[href=&#34;#</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">&#34;]`</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">             <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                 <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="sb">`.inner ul li a[href=&#34;#</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">&#34;]`</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">             <span class="p">}</span>
</span></span><span class="line"><span class="cl">         <span class="p">})</span>
</span></span><span class="line"><span class="cl">     <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">main</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;--article-width&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">toc</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;--toc-width&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">gap</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;--gap&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">checkTocPosition</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">width</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">main</span> <span class="o">-</span> <span class="p">(</span><span class="nx">toc</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">gap</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;toc-container&#34;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&#34;wide&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;toc-container&#34;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">&#34;wide&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">getOffsetTop</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">getClientRects</span><span class="p">().</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="p">;</span>   
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{- end }}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="调用代码">调用代码<a hidden class="anchor" aria-hidden="true" href="#调用代码">#</a></h3>
<p>  找到主题目录下的layouts/_default/single.html文件，将其复制到根目录下的layouts/_default/single.html中，找到其调用代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="hl"><span class="lnt">2
</span></span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">  {{- if (.Param &#34;ShowToc&#34;) }}
</span></span><span class="line hl"><span class="cl">  {{- partial &#34;toc.html&#34; . }}
</span></span><span class="line"><span class="cl">  {{- end }}
</span></span></code></pre></td></tr></table>
</div>
</div><p>修改为</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="hl"><span class="lnt">2
</span></span><span class="hl"><span class="lnt">3
</span></span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">  {{- if (.Param &#34;ShowToc&#34;) }}
</span></span><span class="line hl"><span class="cl">  <span class="c">&lt;!-- {{- partial &#34;toc.html&#34; . }} --&gt;</span>
</span></span><span class="line hl"><span class="cl">  {{- partial &#34;toc_side.html&#34; . }}
</span></span><span class="line"><span class="cl">  {{- end }}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="./images/edit-single_html.png" alt="single_html"  />
</p>
<h3 id="修改css">修改css<a hidden class="anchor" aria-hidden="true" href="#修改css">#</a></h3>
<p>  在Hugo根目录新建assets文件夹，此时该目录比theme主题目录中的assets文件夹具有更高的优先级。在根目录下的assets中创建css/extended/blank.css，加入以下代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">:</span><span class="nd">root</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">--nav-width</span><span class="p">:</span> <span class="mi">1380</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">--article-width</span><span class="p">:</span> <span class="mi">650</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">--toc-width</span><span class="p">:</span> <span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="kt">px</span> <span class="mi">40</span><span class="kt">px</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">border</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">entry</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">radius</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mf">0.4</span><span class="kt">em</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc-container</span><span class="p">.</span><span class="nc">wide</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-right</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">border</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">left</span><span class="p">:</span> <span class="nb">calc</span><span class="p">((</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">toc</span><span class="o">-</span><span class="n">width</span><span class="p">)</span> <span class="o">+</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gap</span><span class="p">))</span> <span class="o">*</span> <span class="mi">-1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">top</span><span class="p">:</span> <span class="nb">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gap</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">toc</span><span class="o">-</span><span class="n">width</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">wide</span> <span class="p">.</span><span class="nc">toc</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">sticky</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">top</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gap</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="kc">unset</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="kc">unset</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="kc">unset</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="kt">px</span> <span class="mi">40</span><span class="kt">px</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="nt">details</span> <span class="nt">summary</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">cursor</span><span class="p">:</span> <span class="kc">zoom-in</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">margin-inline-start</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mi">12</span><span class="kt">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="nt">details</span><span class="o">[</span><span class="nt">open</span><span class="o">]</span> <span class="nt">summary</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-weight</span><span class="p">:</span> <span class="mi">500</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc-container</span><span class="p">.</span><span class="nc">wide</span> <span class="p">.</span><span class="nc">toc</span> <span class="p">.</span><span class="nc">inner</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">110</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-weight</span><span class="p">:</span> <span class="mi">600</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="nt">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">list-style-type</span><span class="p">:</span> <span class="kc">circle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="p">.</span><span class="nc">inner</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span> <span class="mi">15</span><span class="kt">px</span> <span class="mi">15</span><span class="kt">px</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">/*目录显示高度*/</span>
</span></span><span class="line"><span class="cl">    <span class="k">max-height</span><span class="p">:</span> <span class="mi">83</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">overflow-y</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="p">.</span><span class="nc">inner</span><span class="p">::</span><span class="nd">-webkit-scrollbar-thumb</span> <span class="p">{</span>  <span class="c">/*滚动条*/</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">border</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="mi">7</span><span class="kt">px</span> <span class="kc">solid</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">theme</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">radius</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="nt">li</span> <span class="nt">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">margin-inline-start</span><span class="p">:</span> <span class="nb">calc</span><span class="p">(</span><span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">gap</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">list-style-type</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="nt">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c">/* list-style: none; */</span> <span class="c">/* 不显示目录前的小圆圈 */</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mf">0.95</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding-bottom</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">toc</span> <span class="nt">li</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">secondary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>  重新生成站点即可预览效果。</p>
<h2 id="代码样式设置">代码样式设置<a hidden class="anchor" aria-hidden="true" href="#代码样式设置">#</a></h2>
<p>  Hugo 默认支持 Chroma，但可选的高亮主题不多，<a href="https://xyproto.github.io/splash/docs/all.html">点击查看主题列表</a>。<br>
  在配置文件中禁用 highlight.js，然后使用自带的高亮主题；如果不设置 disableHLJS: true，highlight.js 会覆盖 Chroma 主题。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">params</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">assets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disableHLJS</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">markup</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">highlight</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">codeFences</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">guessSyntax</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">lineNos</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">anchorLineNos</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c"># 行号锚点（特别丑！）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># lineNumbersInTable: true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">noClasses</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">tabWidth</span><span class="p">:</span><span class="w"> </span><span class="m">4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">style</span><span class="p">:</span><span class="w"> </span><span class="l">dracula</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>  但是如果对于代码块中启用了高亮某些行时，行号大于10的时候将会显示不正常，此时只能配置 noClasses: false 并手动使用hugo生成css文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">hugo gen chromastyles --style dracula &gt; assets/css/extended/dracula.css
</span></span></code></pre></td></tr></table>
</div>
</div><p>  代码块中的背景色默认是不随亮暗主题改变的，可以在 assets/css/extended/blank.css 中添加以下内容调整不同的背景色：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">:</span><span class="nd">root</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">--hljs-bg</span><span class="p">:</span> <span class="mh">#282C34</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">dark</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">--hljs-bg</span><span class="p">:</span> <span class="mh">#1c1c1c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Reference
<a href="https://github.com/adityatelange/hugo-PaperMod/issues/923">https://github.com/adityatelange/hugo-PaperMod/issues/923</a><br>
<a href="https://github.com/adityatelange/hugo-PaperMod/wiki/FAQs#using-hugos-syntax-highlighter-chroma">https://github.com/adityatelange/hugo-PaperMod/wiki/FAQs#using-hugos-syntax-highlighter-chroma</a><br>
<a href="https://dvel.me/posts/hugo-papermod-config/#%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE">https://dvel.me/posts/hugo-papermod-config/#%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://fivekernels.github.io/tags/hugo/">Hugo</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://fivekernels.github.io/posts/nginx-variable-and-expression-configuration/">
    <span class="title">« </span>
    <br>
    <span>Nginx 语法 变量和表达式</span>
  </a>
  <a class="next" href="https://fivekernels.github.io/posts/hugo-configuration-theme-loveit/">
    <span class="title"> »</span>
    <br>
    <span>Hugo 主题配置——loveit</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>© 2021-2023 <a href="https://fivekernels.github.io/">胡写乱画</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
